<!DOCTYPE html>

<html>
<head>
  <title>Album Pop Over</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1>Album Pop Over</h1>
<p>This is the element that appears at the bottom of the screen when a user is creating an album. This view is responsible for creating and submiting the album information. It also keeps track of how many photos have been added to the album for the user.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>define [
  <span class="string">'base'</span>
  <span class="string">'dusty!album_pop_over'</span>
], (
  Base
  template
) -&gt;

  <span class="class"><span class="keyword">class</span> <span class="title">AlbumPopOver</span> <span class="keyword">extends</span> <span class="title">Base</span>.<span class="title">ItemView</span></span>
    className: <span class="string">'album-pop-over'</span>
    collection: <span class="keyword">new</span> Base.Collection([], {api: <span class="string">'albums'</span>})
    template: template
    templateHelpers: =&gt;
      photoCount: =&gt;
        plural = <span class="keyword">if</span> <span class="property">@collection</span>.length == <span class="number">1</span> <span class="keyword">then</span> <span class="string">''</span> <span class="keyword">else</span> <span class="string">'s'</span>
        <span class="keyword">return</span> <span class="string">"<span class="subst">#{@collection.length}</span> Photo<span class="subst">#{plural}</span>"</span>

    initialize: -&gt;
      <span class="property">@collection</span>.<span class="literal">on</span> <span class="string">'add remove'</span>, =&gt;
        <span class="keyword">if</span> <span class="property">@collection</span>.length &gt; <span class="number">0</span> <span class="keyword">then</span> <span class="property">@render</span>()
        <span class="property">@eventBus</span>.trigger <span class="string">'album:update'</span>, @
        <span class="keyword">if</span> <span class="property">@collection</span>.length &gt; <span class="number">0</span> <span class="keyword">and</span> !<span class="property">@hasState</span> <span class="string">'show'</span>
          <span class="property">@setState</span> <span class="string">'show'</span>
        <span class="keyword">else</span> <span class="keyword">if</span> !<span class="property">@collection</span>.length
          <span class="property">@unsetState</span> <span class="string">'show'</span>
      <span class="keyword">super</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    eventPrefix: <span class="string">'album'</span>
    events:
      <span class="string">'click button'</span>: <span class="string">'onShareClick'</span>
    busEvents:
      <span class="string">'photo:state:set:selected'</span>: <span class="string">'addPhoto'</span>
      <span class="string">'photo:state:unset:selected'</span>: <span class="string">'removePhoto'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>event handlers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    onShareClick: (event) -&gt;
      event.preventDefault()
      <span class="property">@collection</span>.save()</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>bus event handlers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    photoAction: (photo, action) -&gt;
      <span class="property">@collection</span>[action] photo.model
      <span class="property">@eventBus</span>.trigger <span class="string">"album:<span class="subst">#{action}</span>"</span>, photo
      <span class="keyword">return</span> @
    addPhoto: (photo) -&gt; <span class="property">@photoAction</span> photo, <span class="string">'add'</span>
    removePhoto: (photo) -&gt; <span class="property">@photoAction</span> photo, <span class="string">'remove'</span></pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
